<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>onnode</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en"><a name="onnode.1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>onnode &#8212; run commands on ctdb nodes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">onnode [OPTION] ... NODES COMMAND ...</code> </p></div></div><div class="refsect1" lang="en"><a name="id2507976"></a><h2>DESCRIPTION</h2><p>
      onnode is a utility to run commands on a specific node of a CTDB
      cluster, or on all nodes.
    </p><p>
      The NODES option specifies which node to run a command on. You
      can specify a numeric node number (from 0 to N-1) or the special
      node 'all'.  You can also specify lists of nodes, separated by
      commas, and ranges of numeric node numbers, separated by dashes.
      If nodes are specified multiple times then the command will be
      executed multiple times on those nodes.  The order of nodes is
      significant.
    </p><p>
      The COMMAND can be any shell command. The onnode utility uses
      ssh or rsh to connect to the remote nodes and run the command.
      </p></div><div class="refsect1" lang="en"><a name="id2508002"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term">-c</span></dt><dd><p>
            Execute COMMAND in the current working directory on each
            node.
	  </p></dd><dt><span class="term">-p</span></dt><dd><p>
            Run commands in parallel on the specified nodes.  In this
            mode 
	  </p></dd><dt><span class="term">-q</span></dt><dd><p>
            Do not print node addresses.  Normally, onnode prints
            informational node addresses if more than one node is
            specified.  This overrides -v.
	  </p></dd><dt><span class="term">-v</span></dt><dd><p>
            Print a node addresses even if only one node is specified.
            Normally, onnode prints informational node addresses when
            more than one node is specified.
	  </p></dd><dt><span class="term">-h, --help</span></dt><dd><p>
            Show a short usage guide.
	  </p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2511603"></a><h2>EXAMPLES</h2><p>
      The following command would show the process ID of ctdb on all nodes
    </p><pre class="screen">
      onnode all pidof ctdbd
    </pre><p>
      The following command would show the last 5 lines of log on each
      node, preceded by the node's hostname
    </p><pre class="screen">
      onnode all "hostname; tail -5 /var/log/log.ctdb"
    </pre><p>
      The following command would restart the ctdb service on all nodes.
    </p><pre class="screen">
      onnode all service ctdb restart
    </pre><p>
      The following command would run ./foo in the current working
      directory, in parallel, on nodes 0, 2, 3 and 4.
    </p><pre class="screen">
      onnode -c -p 0,2-4 ./foo
    </pre></div><div class="refsect1" lang="en"><a name="id2511652"></a><h2>FILES</h2><div class="variablelist"><dl><dt><span class="term">/etc/ctdb/nodes</span></dt><dd><p>
            Contains a list of each node's IP address or hostname.
	  </p></dd><dt><span class="term">/etc/ctdb/onnode.conf</span></dt><dd><p>
            If this file exists it is sourced by onnode.  The main
            purpose is to allow the administrator to set $SSH to
            something other than "ssh".  In this case the -t option is
            ignored.  For example, the administrator may choose to use
            use rsh instead of ssh.
	  </p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2511691"></a><h2>SEE ALSO</h2><p>
      ctdbd(1), ctdb(1), <a class="ulink" href="http://ctdb.samba.org/" target="_top">http://ctdb.samba.org/</a>
    </p></div><div class="refsect1" lang="en"><a name="id2511704"></a><h2>COPYRIGHT/LICENSE</h2><div class="literallayout"><p><br>
Copyright (C) Andrew Tridgell 2007<br>
Copyright (C) Ronnie sahlberg 2007<br>
Copyright (C) Martin Schwenke 2008<br>
<br>
This program is free software; you can redistribute it and/or modify<br>
it under the terms of the GNU General Public License as published by<br>
the Free Software Foundation; either version 3 of the License, or (at<br>
your option) any later version.<br>
<br>
This program is distributed in the hope that it will be useful, but<br>
WITHOUT ANY WARRANTY; without even the implied warranty of<br>
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br>
General Public License for more details.<br>
<br>
You should have received a copy of the GNU General Public License<br>
along with this program; if not, see http://www.gnu.org/licenses/.<br>
</p></div></div></div></body></html>
